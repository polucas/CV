<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jed Malec - Solution Designer</title>
    <style>
        /* --- GLOBAL & FONTS --- */
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@300;400;700&display=swap');

        :root {
            --text-color: #e0e0e0;
            
            /* GOLD ACCENT PALETTE */
            --accent-color: #c5a059; 
            --accent-dark: #8a6e3e;
            --accent-light: #e6cfa5;
            --accent-hover: #e6cfa5;
            --window-bg: rgba(10, 10, 10, 0.95);
            
            /* Petal Colors */
            --petal-red-dark: #2a0505;
            --petal-red-light: #500a0a; 
            --petal-white-dark: #8a6e3e; 
            --petal-white-light: #d4c5a9;
        }

        body {
            margin: 0;
            padding: 0;
            background-image: url('exp.png'); 
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            color: var(--text-color);
            font-family: 'Lato', sans-serif;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            position: relative;
        }

        #petal-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .petal {
            position: absolute;
            top: 0;
            left: 0;
            will-change: transform, opacity;
            mask-size: contain;
            -webkit-mask-size: contain;
            mask-repeat: no-repeat;
            -webkit-mask-repeat: no-repeat;
            mask-position: center;
            -webkit-mask-position: center;
        }

        /* --- REALISTIC PETAL SHAPES --- */
        .petal.shape1 {
            mask-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M50,5 C25,15 0,50 10,80 C20,95 60,95 85,80 C100,50 85,15 50,5 Z" /></svg>');
            -webkit-mask-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M50,5 C25,15 0,50 10,80 C20,95 60,95 85,80 C100,50 85,15 50,5 Z" /></svg>');
        }
        .petal.shape2 {
            mask-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M60,10 C30,10 10,40 5,70 C5,90 30,100 60,95 C90,90 100,60 95,30 C90,10 75,5 60,10 Z" /></svg>');
            -webkit-mask-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M60,10 C30,10 10,40 5,70 C5,90 30,100 60,95 C90,90 100,60 95,30 C90,10 75,5 60,10 Z" /></svg>');
        }
        .petal.shape3 {
            mask-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M70,10 C40,20 20,50 20,80 C30,95 60,90 80,70 C100,50 90,20 70,10 Z" /></svg>');
            -webkit-mask-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M70,10 C40,20 20,50 20,80 C30,95 60,90 80,70 C100,50 90,20 70,10 Z" /></svg>');
        }

        .petal.red {
            background: radial-gradient(circle at 30% 30%, var(--petal-red-light), var(--petal-red-dark) 80%);
            box-shadow: inset 0 0 20px rgba(0,0,0,0.8);
        }

        .petal.white {
            background: radial-gradient(circle at 30% 30%, var(--petal-white-light), var(--petal-white-dark) 80%);
            box-shadow: inset 0 0 15px rgba(0,0,0,0.3);
            opacity: 0.9;
        }

        /* --- DESKTOP LAYOUT --- */
        #desktop {
            position: relative;
            z-index: 10;
            width: 100%;
            height: 100%;
            display: grid;
            grid-template-columns: 250px 1fr 250px;
            grid-template-rows: 1fr;
            padding: 40px;
            box-sizing: border-box;
        }

        .col-left, .col-right {
            display: flex;
            flex-direction: column;
            gap: 30px;
            justify-content: center;
        }

        .col-right { align-items: flex-end; }
        .col-left { align-items: flex-start; }

        .col-center {
            display: flex;
            flex-direction: column;
            align-items: center;
            /* Layout Adjustment: Aligns items to the top (start) */
            justify-content: flex-start;
            height: 100%;
            /* Pushes the photo slightly down from the top edge, but keeps it high */
            padding-top: 4vh; 
        }

        /* --- MENU --- */
        .contents-menu {
            position: absolute;
            top: 30px;
            left: 30px;
            z-index: 50;
        }

        .menu-btn {
            background: rgba(10, 10, 10, 0.8);
            border: 1px solid var(--accent-color);
            color: var(--accent-color);
            padding: 10px 20px;
            font-family: 'Cinzel', serif;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: all 0.3s ease;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }

        .menu-btn:hover {
            background: var(--accent-color);
            color: #000;
            box-shadow: 0 0 15px var(--accent-color);
        }

        .menu-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            width: 200px;
            background: rgba(10, 10, 10, 0.95);
            border: 1px solid var(--accent-color);
            margin-top: 5px;
            display: none;
            flex-direction: column;
            padding: 10px 0;
            backdrop-filter: blur(5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.8);
        }

        .menu-dropdown.show { display: flex; }

        .menu-item {
            padding: 10px 20px;
            color: #aaa;
            cursor: pointer;
            font-size: 0.9rem;
            transition: color 0.2s;
            border-bottom: 1px solid rgba(197, 160, 89, 0.1);
        }

        .menu-item:hover {
            color: var(--accent-color);
            background: rgba(197, 160, 89, 0.1);
        }
        .menu-item:last-child { border-bottom: none; }

        /* --- ICONS --- */
        .file-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100px;
            cursor: pointer;
            transition: transform 0.2s;
            text-align: center;
        }

        .file-icon:hover { transform: scale(1.1); }

        .file-icon:hover .icon-frame, 
        .file-icon:hover .readme-icon {
            border-color: var(--accent-light);
            box-shadow: 0 0 15px var(--accent-color);
        }

        .icon-frame {
            width: 64px;
            height: 64px;
            background: rgba(20, 20, 20, 0.8); 
            border: 2px solid var(--accent-color); 
            border-radius: 14px; 
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.6);
            transition: all 0.2s ease;
            overflow: hidden;
            position: relative;
        }

        .icon-frame img {
            width: 80%;
            height: 80%;
            object-fit: contain;
            filter: sepia(0.2); 
        }

        .readme-icon {
            width: 50px;
            height: 64px;
            background: linear-gradient(135deg, #1a1a1a, #000);
            border: 1px solid var(--accent-color);
            border-radius: 4px;
            margin-bottom: 8px;
            position: relative;
            box-shadow: 0 4px 6px rgba(0,0,0,0.5);
            transition: all 0.2s ease;
        }
        
        .readme-icon::after {
            content: '';
            position: absolute;
            top: 12px;
            left: 8px;
            right: 8px;
            height: 2px;
            background: rgba(197, 160, 89, 0.3);
            box-shadow: 0 6px 0 rgba(197, 160, 89, 0.3), 0 12px 0 rgba(197, 160, 89, 0.3), 0 18px 0 rgba(197, 160, 89, 0.3);
        }
        
        .readme-icon::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            border-width: 0 12px 12px 0;
            border-style: solid;
            border-color: #333 #000 #333 #333; 
            background: #444;
            display: block;
            width: 0;
        }

        .file-label {
            font-family: 'Cinzel', serif;
            font-size: 0.8rem;
            color: var(--accent-light);
            text-shadow: 0 2px 4px black;
            margin-top: 4px;
            letter-spacing: 1px;
        }

        /* --- PROFILE --- */
        .profile-pic {
            /* SIZE UPDATED to 240px */
            width: 240px;
            height: 240px;
            border-radius: 50%;
            border: 2px solid var(--accent-color);
            box-shadow: 0 0 0 4px rgba(0,0,0,0.8), 0 0 30px var(--accent-dark);
            object-fit: cover;
            background-color: #000; 
            
            /* SPACING LOGIC: 
               This margin pushes the Read.Me icon down, creating 
               space for the background text in the middle.
            */
            margin-bottom: 40vh; 
        }

        /* --- MODAL WINDOWS --- */
        .window {
            position: fixed; 
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%); 
            width: 600px;
            max-width: 90%;
            max-height: 80vh;
            background-color: var(--window-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--accent-color);
            box-shadow: 0 0 0 1px #000, 0 0 0 3px var(--accent-dark), 0 20px 50px rgba(0,0,0,1);
            z-index: 100;
            display: none;
            flex-direction: column;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .window.active { display: flex; opacity: 1; }

        .window-header {
            background: linear-gradient(90deg, #050505, #1a1a1a);
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--accent-dark);
            cursor: move; 
            user-select: none;
        }

        .window-title {
            font-family: 'Cinzel', serif;
            color: var(--accent-color); 
            font-size: 1.1rem;
            letter-spacing: 1px;
        }

        .close-btn {
            background: none;
            border: none;
            color: var(--accent-dark);
            font-size: 1.5rem;
            cursor: pointer;
            line-height: 1;
            transition: color 0.2s;
        }

        .close-btn:hover { color: var(--accent-light); }

        .window-content {
            padding: 30px;
            overflow-y: auto;
            line-height: 1.6;
            font-size: 1rem;
            cursor: default;
            color: #ccc;
        }
        
        .window-content::-webkit-scrollbar { width: 8px; }
        .window-content::-webkit-scrollbar-thumb { background: var(--accent-dark); border-radius: 4px; }
        .window-content::-webkit-scrollbar-track { background: #111; }

        .window-content h3 {
            color: var(--accent-color);
            border-bottom: 1px solid var(--accent-dark);
            padding-bottom: 10px;
            margin-top: 0;
            font-family: 'Cinzel', serif;
        }
        
        .window-content strong { color: #fff; }

        .tag-cloud span {
            display: inline-block;
            background: #111;
            border: 1px solid var(--accent-dark);
            color: var(--accent-light);
            padding: 5px 10px;
            margin: 5px;
            border-radius: 2px;
            font-size: 0.9rem;
        }

        a { color: var(--accent-color); text-decoration: none; font-weight: bold; }
        a:hover { text-decoration: underline; color: #fff; }

    </style>
</head>
<body>

    <div id="petal-container"></div>

    <div class="contents-menu">
        <button class="menu-btn" onclick="toggleMenu()">Contents</button>
        <div class="menu-dropdown" id="menu-list">
            <div class="menu-item" onclick="openWindow('iqvia'); toggleMenu()">IQVIA (Present)</div>
            <div class="menu-item" onclick="openWindow('aktana'); toggleMenu()">AKTANA</div>
            <div class="menu-item" onclick="openWindow('alexion'); toggleMenu()">Alexion</div>
            <div class="menu-item" onclick="openWindow('evotec'); toggleMenu()">Evotec</div>
            <div class="menu-item" onclick="openWindow('education'); toggleMenu()">Education</div>
            <div class="menu-item" onclick="openWindow('skills'); toggleMenu()">Skills</div>
            <div class="menu-item" onclick="openWindow('training'); toggleMenu()">Training</div>
            <div class="menu-item" onclick="openWindow('languages'); toggleMenu()">Languages</div>
            <div class="menu-item" onclick="openWindow('pubs'); toggleMenu()">Publications</div>
            <div class="menu-item" onclick="openWindow('readme'); toggleMenu()">Read.me</div>
        </div>
    </div>

    <div id="desktop">
        <div class="col-left">
            <div class="file-icon" onclick="openWindow('education')">
                <div class="icon-frame"><img src="education.png" alt="Education"></div>
                <div class="file-label">Education</div>
            </div>
            <div class="file-icon" onclick="openWindow('skills')">
                <div class="icon-frame"><img src="skills.avif" alt="Skills"></div>
                <div class="file-label">Skills</div>
            </div>
            <div class="file-icon" onclick="openWindow('training')">
                <div class="icon-frame"><img src="training.png" alt="Training"></div>
                <div class="file-label">Training</div>
            </div>
            <div class="file-icon" onclick="openWindow('languages')">
                <div class="icon-frame"><img src="language.png" alt="Languages"></div>
                <div class="file-label">Languages</div>
            </div>
            <div class="file-icon" onclick="openWindow('pubs')">
                <div class="icon-frame"><img src="publications.jpg" alt="Publications"></div>
                <div class="file-label">Publications</div>
            </div>
        </div>

        <div class="col-center">
            <img src="jed-photo.png" alt="Jed Malec" class="profile-pic" onerror="this.style.background='#333'">
            
            <div class="file-icon" onclick="openWindow('readme')">
                <div class="readme-icon"></div>
                <div class="file-label">Read.me</div>
            </div>
        </div>

        <div class="col-right">
            <div class="file-icon" onclick="openWindow('iqvia')">
                <div class="icon-frame"><img src="iqvia.webp" alt="IQVIA"></div>
                <div class="file-label">IQVIA (Present)</div>
            </div>
            <div class="file-icon" onclick="openWindow('aktana')">
                <div class="icon-frame"><img src="aktana.webp" alt="AKTANA"></div>
                <div class="file-label">AKTANA (2023)</div>
            </div>
            <div class="file-icon" onclick="openWindow('alexion')">
                <div class="icon-frame"><img src="alexion.webp" alt="Alexion"></div>
                <div class="file-label">Alexion (2019)</div>
            </div>
            <div class="file-icon" onclick="openWindow('evotec')">
                <div class="icon-frame"><img src="evotec.webp" alt="Evotec"></div>
                <div class="file-label">Evotec (2018)</div>
            </div>
        </div>
    </div>

    <div id="modal-window" class="window">
        <div class="window-header" id="modal-header">
            <span class="window-title" id="modal-title">Title</span>
            <button class="close-btn" onclick="closeWindow()">Ã—</button>
        </div>
        <div class="window-content" id="modal-content"></div>
    </div>

    <script>
        // --- MENU LOGIC ---
        function toggleMenu() {
            const menu = document.getElementById('menu-list');
            menu.classList.toggle('show');
        }
        
        document.addEventListener('click', function(event) {
            const menu = document.getElementById('menu-list');
            const btn = document.querySelector('.menu-btn');
            if (!menu.contains(event.target) && !btn.contains(event.target)) {
                menu.classList.remove('show');
            }
        });

        // --- CONTENT DATA ---
        const contentData = {
            readme: `
                <h3>Profile</h3>
                <p>Solution Designer with 9+ years of experience bridging technical concepts with business requirements & value. Scientist turned into Tech & IT solutions specialist.</p>
                <p>I specialize in translating complex data & software solutions into actionable business strategies that deliver revenue (delivered $13M+ in value across recent roles). I help users derive value from sophisticated software products by researching data, designing, and implementing solutions to solve business problems.</p>
                <p>I thrive in complex and cross-functional positions, and having learned about PostHog, I'm confident I'd be a great fit.</p>
                <p><strong>Contact:</strong> jedrzej.malec@gmail.com | +34 689 759 240 | Barcelona, Spain</p>
                <p><strong>LinkedIn:</strong> <a href="https://www.linkedin.com/in/jed-malec" target="_blank">linkedin.com/in/jed-malec</a></p>
            `,
            iqvia: `
                <h3>IQVIA (REMOTE, ES)</h3>
                <p><strong>Associate Director | Data, Analytics & AI</strong><br>Oct 2023 - Present</p>
                <p>Solution Architect for data and AI analytics products. I help clients get value from their data and our products.</p>
                <ul>
                    <li><strong>Platform Architecture:</strong> Designed and deployed data products on cloud platforms (AWS, Azure, Snowflake) integrating various data sources (CRM, Sales, Website, Event, ML Forecasts) to create custom Business Intelligence solutions for clients.</li>
                    <li><strong>AI Implementation:</strong> Implemented and scaled an Agentic AI analytics system, enabling business users to retrieve complex data insights (text-2-JSON-2-SQL), reducing manual reporting.</li>
                    <li><strong>Technical Implementation:</strong> Led the implementation of custom data products for major enterprise accounts, merging various raw data sources into 60+ actionable use cases. I gathered requirements, designed the solution & provided training.</li>
                    <li><strong>Product Analytics:</strong> Led the design of analytics and business use cases for a custom LLM wrapper app for Physicians. Implemented data pipeline and the analysis of prompts and answers and built a dashboard and an AI Agent for data exploration.</li>
                </ul>
            `,
            aktana: `
                <h3>AKTANA (Barcelona, ES)</h3>
                <p><strong>Senior Delivery Lead</strong> | May 2020 - Oct 2023<br>
                <strong>Customer Success Analyst</strong> | Nov 2019 - Apr 2020</p>
                <ul>
                    <li><strong>Scaling Adoption:</strong> Built and scaled an algorithmic decision engine from 1 to 40 markets, growing it to the largest project in the company.</li>
                    <li><strong>Productizing Solutions:</strong> Built and productized an internal pricing and effort estimation tool, streamlining operations and improving margin forecasting.</li>
                    <li><strong>Customer Success:</strong> Acted as primary technical bridge between Engineering and Customer, translating "black box" algorithms into understandable value.</li>
                </ul>
            `,
            alexion: `
                <h3>ALEXION PHARMA (Barcelona, ES)</h3>
                <p><strong>Commercial Ops Analyst</strong> | Dec 2018 - Oct 2019<br>
                <strong>Brand Manager Support</strong> | Apr 2018 - Dec 2018</p>
                <ul>
                    <li><strong>Dashboarding:</strong> Developed Excel and Power BI performance dashboards that replaced manual reporting, giving leadership actionable insights.</li>
                    <li><strong>System Admin:</strong> Administered CRM platform (Veeva), ensuring data quality and training end users.</li>
                </ul>
            `,
            evotec: `
                <h3>EVOTEC (Oxford, UK)</h3>
                <p><strong>DMPK Scientist II</strong> | Oct 2016 - Dec 2017</p>
                <ul>
                    <li><strong>Machine Learning:</strong> Developed and deployed Machine Learning algorithms for property prediction, automating manual analysis processes.</li>
                    <li><strong>Data Analysis:</strong> Led data modeling initiatives to interpret complex experimental datasets.</li>
                </ul>
            `,
            education: `
                <h3>Education</h3>
                <p><strong>MBA Pharmaceutical & Bio-Technology Industry</strong><br>
                Talento-EPHOS Business School | Barcelona, ES (2018-2019)</p>
                <p><strong>MSc Drug Discovery & Pharmaceutical Sciences</strong><br>
                University of Nottingham | Nottingham, UK (2015-2016)</p>
                <p><strong>BSc Nanoscience & Nanotechnology</strong><br>
                Autonomous University of Barcelona | Barcelona, ES (2011-2015)</p>
            `,
            skills: `
                <h3>Skills & Competencies</h3>
                <div class="tag-cloud">
                    <span>Solution Design</span>
                    <span>AI & Analytics</span>
                    <span>Data Products</span>
                    <span>Data Modelling</span>
                    <span>API Integrations</span>
                    <span>SQL (Advanced)</span>
                    <span>Python (Intermediate)</span>
                    <span>Stakeholder Management</span>
                    <span>Strategic Thinking</span>
                </div>
            `,
            training: `
                <h3>Selected Training</h3>
                <ul>
                    <li>IBM AI Engineering, 2025 (WIP)</li>
                    <li>Databricks Leadership, 2025</li>
                    <li>Leader of the Future, 2025</li>
                    <li>Veeva CRM White Belt, 2021-2023</li>
                    <li>Agile & Scrum, 2021</li>
                    <li>Power BI & Data Visualization, 2019</li>
                </ul>
            `,
            languages: `
                <h3>Languages</h3>
                <ul>
                    <li><strong>English:</strong> Native</li>
                    <li><strong>Spanish:</strong> Native</li>
                    <li><strong>Polish:</strong> Fluent</li>
                    <li><strong>Catalan:</strong> Advanced</li>
                </ul>
            `,
            pubs: `
                <h3>Publications</h3>
                <ul>
                   <li>
                        <a href="https://www.sciencedirect.com/science/article/pii/S0168365918304164" target="_blank">
                           [Lipophilic activated ester prodrug approach for drug delivery to the intestinal lymphatic system], [Malec J. et al.], [2018], [Journal of Controlled Release]
                        </a>
                   </li>
                   <li>
                        <a href="https://www.sciencedirect.com/science/article/abs/pii/S1570023220313908" target="_blank">
                           [Retention-directed and selectivity controlled chromatographic resolution: Rapid post-hoc analysis of DMPK samples to achieve high-throughput LC-MS separation], [Malec J. et al.], [2020], [Journal of Chromatography B]
                        </a>
                   </li>
                   <li>
                        <a href="https://www.page-meeting.org/wp-content/uploads/pdf_assets/2084-CM%20modelling%20PAGE%20conference%202017.pdf" target="_blank">
                        [In silico modelling of chylomicron association to predict lymphatic absorption of small molecules], [Malec J. et al.], 2017, PAGE Conference
                        </a>
                   </li>
                </ul>
            `
        };

        // --- WINDOW LOGIC (With Drag) ---
        const modal = document.getElementById('modal-window');
        const modalTitle = document.getElementById('modal-title');
        const modalContent = document.getElementById('modal-content');
        const modalHeader = document.getElementById('modal-header');

        function openWindow(id) {
            if(contentData[id]) {
                // Center Logic
                modal.style.top = '50%';
                modal.style.left = '50%';
                modal.style.transform = 'translate(-50%, -50%)';
                
                modalTitle.innerText = id.toUpperCase().replace('PUBS', 'PUBLICATIONS').replace('README', 'READ.ME');
                modalContent.innerHTML = contentData[id];
                modal.classList.add('active');
            }
        }

        function closeWindow() {
            modal.classList.remove('active');
        }

        dragElement(modal);

        function dragElement(elmnt) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            const header = document.getElementById(elmnt.id + "-header");
            
            if (header) { header.onmousedown = dragMouseDown; } 
            else { elmnt.onmousedown = dragMouseDown; }

            function dragMouseDown(e) {
                e = e || window.event;
                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;

                const rect = elmnt.getBoundingClientRect();
                elmnt.style.transform = "none";
                elmnt.style.left = rect.left + "px";
                elmnt.style.top = rect.top + "px";

                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }

            function elementDrag(e) {
                e = e || window.event;
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
                elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
            }

            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }

        // --- REALISTIC PETAL SYSTEM ---
        const container = document.getElementById('petal-container');
        const petals = [];
        const petalCount = 60; 

        class Petal {
            constructor() {
                this.el = document.createElement('div');
                this.el.classList.add('petal');
                const shapeNum = Math.ceil(Math.random() * 3);
                this.el.classList.add(`shape${shapeNum}`);
                if(Math.random() > 0.3) {
                    this.el.classList.add('red');
                } else {
                    this.el.classList.add('white');
                }
                container.appendChild(this.el);
                this.reset(true);
            }

            reset(firstRun = false) {
                this.x = Math.random() * window.innerWidth;
                this.y = firstRun ? Math.random() * window.innerHeight : -100;
                this.size = Math.random() * 30 + 15; 
                this.speedY = Math.random() * 1.5 + 0.5;
                this.speedX = Math.random() * 1 - 0.5; 
                this.swaySpeed = Math.random() * 0.02 + 0.01;
                this.swayAmp = Math.random() * 1.5 + 0.5;
                this.angle = Math.random() * 360;
                this.spin = Math.random() * 2 - 1;
                this.blur = Math.random() * 4;
                
                this.el.style.width = `${this.size}px`;
                this.el.style.height = `${this.size}px`;
                this.el.style.filter = `blur(${this.blur}px)`;
                this.el.style.opacity = Math.random() * 0.4 + 0.5; 
            }

            update(time) {
                this.y += this.speedY;
                this.x += Math.sin(this.y * this.swaySpeed) * this.swayAmp + this.speedX;
                this.angle += this.spin;
                if (this.y > window.innerHeight + 100) this.reset();
                this.el.style.transform = `translate(${this.x}px, ${this.y}px) rotateX(${this.angle*0.5}deg) rotateY(${this.angle*0.3}deg) rotateZ(${this.angle}deg)`;
            }
        }

        for (let i = 0; i < petalCount; i++) {
            petals.push(new Petal());
        }

        function animate(time) {
            petals.forEach(p => p.update(time));
            requestAnimationFrame(animate);
        }
        
        requestAnimationFrame(animate);

    </script>
</body>
</html>